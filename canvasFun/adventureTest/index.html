<html>
  <head>
    <script
  src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
  integrity="sha256-3edrmyuQ0w65f8gfBsqowzjJe2iM6n0nKciPUp8y+7E="
  crossorigin="anonymous"></script>
    <style>
      #viewport {
        border-style: solid;
        border-width: 1px;
        border-color: #000;
      }
    </style>
    <script>
    var canvas;
    var ctx;
    var clickBoxes = [];

    function ClickBox(point1, point2) {
      var p1 = point1;
      var p2 = point2;

      this.contains = function(p) {
        if(p.x < p1.x || p.y < p1.y) {
          return false;
        }
        if(p.x > p2.x || p.y > p2.y) {
          return false;
        }
        return true;
      }

      this.draw = function() {
        ctx.beginPath();
        ctx.lineWidth="10";
        ctx.strokeStyle="red";
        ctx.rect(p1.x, p1.y, p2.x-p1.x, p2.y-p1.y);
        ctx.stroke();
      }

    }

    function main() {
      canvas = $('#viewport')[0];
      ctx = canvas.getContext('2d');
      canvas.addEventListener('click', canvasClick, false);
      loadImage("AudioBooks.jpg");
      var p1 = {};
      p1.x = 112;
      p1.y = 47;
      var p2 = {};
      p2.x = 150;
      p2.y = 201;
      var cb = new ClickBox(p1, p2)
      var p3 = {};
      p3.x = 394;
      p3.y = 33;
      var p4 = {};
      p4.x = 430;
      p4.y = 200;
      cb2 = new ClickBox(p3, p4);
      cb2.onclick = function() {
        alert("you clicked the other book");
      }
      cb.onclick = function() {
        alert("you clicked the book!");
      }
      clickBoxes.push(cb);
      clickBoxes.push(cb2);
    }

    function drawClickBoxes() {
      for(var i=0;i<clickBoxes.length;i++) {
        clickBoxes[i].draw();
      }
    }

    function canvasClick(e) {
      var pos = getCursorPosition(e);
      console.log(pos.x + "," + pos.y);
      for(var i=0;i<clickBoxes.length;i++) {
        if(clickBoxes[i].contains(pos)) {
          clickBoxes[i].onclick();
        }
      }
    }

    function loadImage(url) {
      var img = new Image;
      img.onload = function() {
        ctx.drawImage(img,0,0);
        drawClickBoxes();
      }
      img.src = url;
    }

    function getCursorPosition(event) {
        var rect = canvas.getBoundingClientRect();
        var pos = {};
        pos.x = event.clientX - rect.left;
        pos.y = event.clientY - rect.top;
        //console.log("x: " + x + " y: " + y);
        return pos;
    }

    </script>
  </head>
  <body onload='main()'>
    <canvas onClick="canvasClick" width="500" height="500" id='viewport'>
    </canvas>
  </body>
</html>
